# ==============================================================================
# CORE DJANGO AND INFRASTRUCTURE CONFIGURATION
# ==============================================================================

# WARNING: This is a public example file. DO NOT commit your secrets to version control.
# Copy this file to .env and fill in your actual secrets.

# Django secret key. In production, this MUST be a long, random string.
# You can generate one using: python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
DJANGO_SECRET_KEY=change-me-in-production

# Set to 'app.settings.prod' in production environments
DJANGO_SETTINGS_MODULE=app.settings.local

# Set to 'False' in production
DJANGO_DEBUG=True

# Application database (PostgreSQL) connection URL.
# The default value is for the local Docker Compose setup.
DATABASE_URL=postgresql+psycopg://app:pass@db:5432/app

# Redis connection URL for Celery broker and application caching.
# The default value is for the local Docker Compose setup.
REDIS_URL=redis://redis:6379/0

# The public URL for the frontend application. Used for CORS and other settings.
FRONTEND_URL=http://localhost:3000

# ==============================================================================
# NLQ, QUERY, AND EXECUTION SETTINGS
# ==============================================================================

# The URL of the pluggable NL->SQL provider (e.g., a hosted LLM endpoint).
LLM_PROVIDER_URL=https://api.example-llm.com/v1/chat/completions
# The API key for the LLM provider.
LLM_API_KEY=your-llm-api-key

# Safety cap: Maximum size of query results in bytes (default: 100 MB).
RESULT_MAX_BYTES=104857600
# Safety cap: Maximum number of rows to return from a query (default: 1,000,000).
RESULT_MAX_ROWS=1000000
# Default query execution timeout in milliseconds (default: 30 seconds).
QUERY_TIMEOUT_MS=30000

# ==============================================================================
# TENANCY AND USER SETTINGS
# ==============================================================================

# The default plan assigned to new tenants upon creation.
DEFAULT_TENANT_PLAN=free

# ==============================================================================
# OPTIONAL ADD-ON FEATURES (Defaults from Spec)
# ==============================================================================
# See docs/ARCHITECTURE.md for more details on these features.

# --- Provider Routing & Caching ---
# Comma-separated list of providers to try in order.
# PROVIDER_CHAIN=stub,ollama,groq
# Timeout for each provider call in milliseconds.
# PROVIDER_TIMEOUT_MS=10000
# Enable caching of NLQ responses.
# CACHE_NLQ_ENABLED=true
# Time-to-live for cached NLQ responses in seconds.
# CACHE_NLQ_TTL_SEC=14400

# --- Schema Retrieval Booster (Embeddings) ---
# Enabled by default to improve schema linking for prompts.
EMBEDDINGS_ENABLED=true
EMBEDDINGS_MODEL=all-MiniLM-L6-v2
RERANKER_ENABLED=true
RERANKER_MODEL=bge-reranker-base

# --- Frontend Features ---
# These flags can be used by the frontend build process.
VITE_ENABLE_3D=true
VITE_ENABLE_CHAT=true
